version: 1
common:
  resourcesPath: dapr/local/components
  env:
    DEBUG: true
apps:
  - appID: summarizer-frontend
    appDirPath: ./src/frontend/
    appPort: 11000
    command: ["dotnet", "watch"]
    env:
      PUBSUB_REQUESTS_NAME: "summarizer-pubsub"
      PUBSUB_REQUESTS_TOPIC: "link-to-summarize"
      REQUESTS_API_APP_ID: "summarizer-api"
      REQUESTS_API_ENDPOINT: "requests"
      DOTNET_URLS: "http://*:11000"
      ASPNETCORE_ENVIRONMENT: "Development"
      DOTNET_WATCH_SUPPRESS_LAUNCH_BROWSER: "true"
  - appID: summarizer-api
    appDirPath: ./src/api/
    appPort: 12000
    command: ["dotnet", "watch"]
    env:
      STATE_STORE_NAME: "summarizer-statestore"
      STATE_STORE_QUERY_INDEX_NAME: "orgIndx"
      DOTNET_URLS: "http://*:12000"
      ASPNETCORE_ENVIRONMENT: "Development"
      DOTNET_WATCH_SUPPRESS_LAUNCH_BROWSER: "true"
  - appID: summarizer-worker
    appDirPath: ./src/worker/
    appPort: 13000
    command: ["dotnet", "watch"]
    env:
      DOTNET_URLS: "http://*:13000"
      ASPNETCORE_ENVIRONMENT: "Development"
      DOTNET_WATCH_SUPPRESS_LAUNCH_BROWSER: "true"
      PUBSUB_REQUESTS_NAME: "summarizer-pubsub"
      PUBSUB_REQUESTS_TOPIC: "link-to-summarize"
      SECRET_STORE_NAME: "summarizer-secretstore"
      OPENAI_API_DEPLOYMENT_NAME: "aca-dapr-gpt-35-turbo-01"